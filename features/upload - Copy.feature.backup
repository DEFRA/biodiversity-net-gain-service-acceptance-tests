@regression
Feature: upload planning obligation

    As a BNG User
    I need to be able to provide a copy of the planning obligation
    So that I can prove to the Register Operator that I have met the Biodiversity Gain Site eligibility criteria
    @new
    Scenario: I can upload the planning-obligation document
        Given I am on the "planning obligation" upload page
        When I choose a valid file to upload
        And I continue my journey
        Then I should be on the "planning obligation" check page
        And I should be able to see a link to the document
        And I should be able to see the filesize of the document
    # Scenario Outline: I can upload the <document>
    #     Given I am on the "<document>" upload page
    #     When I choose a valid file to upload and continue
    #     Then I should be on the "<document>" check page
    #     And I should be able to see a link to the document
    #     And I should be able to see the filesize of the document
    #     Examples:
    #         | document            | task             |
    #         | planning-obligation | Legal agreements |
    # # | conservation-covenant | Legal agreements |

    Scenario: I can check that the uploaded file is the one I wanted to upload before continuing
        Given I have uploaded the "planning obligation" document
        And I am on the "planning obligation" check page
        Then I should be able to download the file
        And check that it is correct
    #     Given I have uploaded a <document>
    #     And I am on the <document> check page
    #     Then I should be able to download the file
    #     And check that it is correct
    #     Examples:
    #         | document            |
    #         | planning-obligation |
    # # | conservation-covenant |

    Scenario: There is a way to choose a different document if necessary
        Given I have uploaded a "planning obligation" document
        And I am on the "planning obligation" check page
        When I choose a different document
        And I continue my journey
        Then I should be returned to the "planning obligation" upload page
        And The original document should be deleted

    Scenario Outline: I cannot upload a file larger than the max file size
        Given I am on the "planning obligation" upload page
        When I choose a document that is larger than "<maxFileSize>" in size
        Then I should not be able to upload the file
        And I am informed that the max file size should be "<maxFileSize>"
    Example:
            | maxFileSize |
            | 50mb        |

    #Todo: check This should really be a unit test
    # Scenario Outline: I cannot upload an invalid file type
    #     Given I am on the Planning-Obligation upload page
    #     When I choose a file type that is not allowed
    #     Then I should not be able to upload the file
    #     And I am informed of what the allowed file types should be



    Scenario Outline:The <task> section on the task list page should have a status of completed
        Given I have uploaded the <document>
        When I navigate to the task list page
        Then I should see the <task> section show as completed
        Examples:
            | document            | task             |
            | planning-obligation | Legal agreements |
# | conservation-covenant | Legal agreements |
# statuses



# Scenario: I am informed of the expected content of the document being uploaded
# Scenario: I can check that the file is correct before it has been uploaded
# Scenario: There is a way to choose a different file if necessary
# Scenario: I am unable to upload a malicious document*
# Scenario: I am informed if the file type is wrong
# Scenario: I am informed of the correct file types
# Scenario: I am informed of the max file size
# Scenario: I cannot upload a file larger than the max file size


# 1?   I have the option of uploading a planning obligation

# 2. I am informed of the expected content of the document that I am uploading

# 3?. I do not have the option of uploading both a planning obligation and a conservation covenant (JD - there are some scenarios where this could happen!)

# 4.? I can select a file to be uploaded from any local source

# 5? I can select files in specified format - Word or PDF (see note below about embedded PNG/JPEG files) (prototype refers to PDF only)
# (discuss implications for editable Word documents)

# 6? I can upload the selected files and receive a confirmation message (with file size confirmed)

# 7? I can confirm the uploaded file is legible by viewing the upload result

# 8? I can delete any uploaded files if loaded in error

# 9? I can upload any number of files as long as these are valid (prototype only allows a single file - do we need this scenario of multiple filesâ€¦)

# 10? I am informed if the file type selected is incorrect and cannot be uploaded

# 11? I am informed of the correct file types that are acceptable to be uploaded

# 12? I am informed and prevented from uploading any malicious documents

# 13 The page/feature matches the design and content (Shaun.Ricketts not sure what you meant by this one - please clarify, this could only be a visual check at this stage of the process)

# 14 I am informed if I attempt to upload a file which is too large (prototype refers to 50Mb)

# 15? I am informed that the Legal Agreements section for registration is successfully completed when applicable













